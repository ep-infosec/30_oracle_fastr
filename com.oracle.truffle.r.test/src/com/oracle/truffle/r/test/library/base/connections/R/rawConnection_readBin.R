zz <- rawConnection(raw(0), "wb")
writeBin(1:10, zz)
writeBin(pi, zz)
writeBin(pi, zz)
writeBin(pi^2, zz)
writeBin(pi+3i, zz)
writeBin("A test of a connection", zz)
z <- paste("A very long string", 1:100, collapse = " + ")
writeBin(z, zz)
res <- rawConnectionValue(zz)
close(zz)

zz <- rawConnection(res, "rb")
readBin(zz, integer())
readBin(zz, integer())
readBin(zz, numeric())
readBin(zz, complex())
readBin(zz, character())
z2 <- readBin(zz, character())
close(zz)
z2